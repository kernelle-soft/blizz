[jobs.default]
command = ["cargo", "check", "--workspace"]
need_stdout = false
watch = ["crates/"]

[jobs.blizz]
command = ["cargo", "install", "--path", "crates/blizz", "--force"]
need_stdout = false
watch = ["crates/blizz/"]

[jobs.violet]
command = ["cargo", "install", "--path", "crates/violet", "--force"]
need_stdout = false
watch = ["crates/violet/"]

[jobs.thoughts]
command = ["cargo", "install", "--path", "crates/thoughts", "--force"]
need_stdout = false
watch = ["crates/thoughts/"]

[jobs.secrets]
command = ["cargo", "install", "--path", "crates/secrets", "--force"]
need_stdout = false
watch = ["crates/secrets/"]

[jobs.all]
command = ["cargo", "build", "--workspace"]
need_stdout = false
watch = ["crates/"]

[jobs.test]
command = ["cargo", "test", "--workspace"]
need_stdout = true
watch = ["crates/"]

[jobs.clippy]
command = ["cargo", "clippy", "--workspace", "--", "-D", "warnings"]
need_stdout = false
watch = ["crates/"] 

# Coverage jobs
[jobs.test-all]
command = ["cargo tarpaulin --workspace -o Html --output-dir coverage --config tarpaulin.toml"]
watch = ["crates/"]
need_stdout = true

[jobs.test-insights]
command = ["cargo", "tarpaulin", "-p", "insights", "--config", "crates/insights/tarpaulin.toml"]
watch = ["crates/insights/"]
need_stdout = true

[jobs.test-secrets]
command = ["cargo", "tarpaulin", "-p", "secrets", "--config", "crates/secrets/tarpaulin.toml"]
watch = ["crates/secrets/"]
need_stdout = true

[jobs.test-blizz]
command = ["cargo", "tarpaulin", "-p", "blizz", "--config", "crates/blizz/tarpaulin.toml"]
watch = ["crates/blizz/"]
need_stdout = true

[jobs.test-violet]
command = ["cargo", "tarpaulin", "-p", "violet", "--config", "crates/violet/tarpaulin.toml"]
watch = ["crates/violet/"]
need_stdout = true
