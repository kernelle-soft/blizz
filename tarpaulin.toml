[tarpaulin]
coverage-reports = ["Html", "Lcov", "Json"]
output-dir = "target/coverage/"

fail-under = 40.0
ignore-panics = true

skip-clean = true
count = true
branch = true
forward = true

exclude-files = [
  "adam/*",

  # File-level excludes
  "*/tests/*",
  "*/examples/*",
  "*/target/*",

  # Auth module uses external credentials - hard to test
  "*/auth.rs",

  # Update module relies heavily on APIs and the file system - hard to test
  "*/blizz/src/update.rs",

  # Entrypoints and CLI routers are very simple and typically aren't useful to test
  "*/cli.rs",
  "*/main.rs",

  # Oops, all system dependencies!
  # This is a setup script for NVIDIA's cuda ecosystem. It's 95% apt installs, path checking, and user-facing instructions.
  # It's not worth the effort to try to mock or do integration tests on.
  "*/install_insights_cuda_dependencies.rs",
]

timeout = "120s"

run-types = ["Tests"]
release = true

all-features = true
engine = "Llvm"
out = ["Html", "Xml", "Json"]
print = "branch"
